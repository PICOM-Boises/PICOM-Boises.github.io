<!doctype html>

<html lang="en"> 
<head> 
	<meta charset="utf-8">
	<title>Projet PICOM boisés UQTR</title> 
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
	 <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
crossorigin=""></script>	
</head>
<body>
	<h1>Projet PICOM boisés UQTR</h1>
	<p>Un petit texte avant la carte</p>
	<div id="map" style="height:600px" ></div>
	<p>Et un autre petit bout de texte après</p>
	
	<script>
		var map = L.map('map').setView([46.345, -72.585], 16);
		
		const tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				maxZoom: 19,
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			}).addTo(map);
		
		const layers_picom = 
			{
			"type": "FeatureCollection",
			"name": "Test JSON Boisé",
			"crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
			"features": [
			{ "type": "Feature", "properties": { "Name": "A", "Indice1": 2, "Indice2": 3 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -72.584946245127796, 46.343112425677504 ], [ -72.5854056324807, 46.343042913909102 ], [ -72.585235542293205, 46.3424864874194 ], [ -72.583007824907995, 46.341469675860097 ], [ -72.581476151587495, 46.342195939897401 ], [ -72.582139102910304, 46.343234418726098 ], [ -72.5817778477589, 46.343684540377502 ], [ -72.581699631159907, 46.344552877422899 ], [ -72.582722190824697, 46.345111610961602 ], [ -72.585316334717106, 46.344517044722501 ], [ -72.584946245127796, 46.343112425677504 ] ] ] } },
			{ "type": "Feature", "properties": { "Name": "B", "Indice1": 1, "Indice2": 4 }, "geometry": { "type": "Polygon", "coordinates": [ [ [ -72.585023563275797, 46.345232975782999 ], [ -72.585119995942094, 46.345459925220197 ], [ -72.583862610267005, 46.346005831769503 ], [ -72.583562342051295, 46.3458618659742 ], [ -72.582061264892403, 46.346778670924998 ], [ -72.584744310958399, 46.347065483186903 ], [ -72.586610061184601, 46.345261797741898 ], [ -72.585023563275797, 46.345232975782999 ] ] ] } }
			]
			}

			function getColor(d) {
			    return d > 4 ? '#800026' :
			           d > 3  ? '#E31A1C' :
			           d > 2   ? '#FD8D3C' :
			           d > 1   ? '#FED976' :
			                      '#FFEDA0';
			}

			
		var indice1 = L.geoJSON(layers_picom, {
    		style: function (feature) {
				return {
					fillColor: getColor(feature.properties.Indice1),
					color: getColor(feature.properties.Indice1),
					fillOpacity: 0.7
				};
			}}).addTo(map);

		var indice2 = L.geoJSON(layers_picom, {
	    	style: function (feature) {
				return {
					fillColor: getColor(feature.properties.Indice2),
					color: getColor(feature.properties.Indice2),
					fillOpacity: 0.7
				};
			}}).addTo(map);

			var couches = {
			    "Indice 1": indice1,
				"Indice 2": indice2
			};


		var layerControl = L.control.layers(couches).addTo(map);		
		
			/*fetch("Test.geojson")
				.then(function(response) {
					return response.json();
				})
				.then(function(data) {
					L.geoJSON(data).addTo(map);
				});*/
	</script>
</body>
</html>
